{"version":3,"file":"src_app_home_home_module_ts.js","mappings":"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","sources":["./src/app/home/home.component.ts","./src/app/home/home.module.ts","./src/app/home/home.routes.ts","./src/app/home/site-backup/site-backup.component.ts"],"sourcesContent":["import {Component, OnInit, ViewChild} from '@angular/core';\nimport {SiteContextProviderService} from '../../dev-tools/site-context-provider/services/site-context-provider.service';\nimport {AdminService} from '../admin-dashboard/admin/admin.service';\nimport {SiteManagementService} from '../../dev-tools/services/site-management.service';\n\n@Component({\n    templateUrl: './home.component.html'\n})\n\nexport class HomeComponent implements OnInit {\n\n    /**\n     * Confirm delete from html\n     */\n    @ViewChild('confirm', { static: false }) ModalStatic;\n\n    private localDirectories: any[] = [];\n    private admindata: any;\n    public backupFiles: any[] = [];\n    showDeletedSpinner = false;\n\n    constructor(private _siteContextProviderService: SiteContextProviderService,\n                private _siteManagementService: SiteManagementService,\n                private _adminService: AdminService, ) {\n    }\n\n    ngOnInit() {\n        this.onGetLocalDirectories();\n        this.getAdminData();\n        // this.getBackupFilesList();\n    }\n\n    /**\n     *  Get site buildkit directories\n     */\n    onGetLocalDirectories() {\n        this._siteContextProviderService.getLocalDirectories()\n            .subscribe(\n                data => {\n                    this.localDirectories = data;\n                },\n                error => console.log(error)\n            );\n    }\n\n    /**\n     * Get current admin data. ie: current release information\n     */\n    getAdminData() {\n        this._adminService.getFormData().subscribe(\n            data => {\n                this.admindata = data.adminData;\n            }\n        );\n    }\n\n    /**\n     * Get list of zip files in /archives\n     */\n    // getBackupFilesList() {\n    //     this._siteManagementService.backupFilesExist()\n    //         .subscribe(\n    //             data => {\n    //                 this.backupFiles = data;\n    //             },\n    //             error => console.log(error)\n    //         );\n    // }\n}\n\n","import {NgModule, CUSTOM_ELEMENTS_SCHEMA} from '@angular/core';\nimport {CommonModule} from '@angular/common';\nimport {HomeComponent} from './home.component';\nimport {ModalStaticModule} from '../modal-static/modal-static.module';\nimport {RouterModule} from '@angular/router';\n// import {AccordionModule} from 'ngx-bootstrap';\nimport {SharedDataModule} from '../shared/shared-data/shared-data.module';\nimport {SiteContextProviderService} from '../../dev-tools/site-context-provider/services/site-context-provider.service';\nimport {AdminService} from '../admin-dashboard/admin/admin.service';\nimport {ModalPopupService} from '../services/modal-popup.service';\nimport {SharedFormattingModule} from '../shared/shared-formatting/shared-formatting.module';\nimport {SiteMetaDataModule} from '../../dev-tools/site-context-provider/site-metadata.module';\nimport {ROUTES} from './home.routes';\nimport {SiteManagementService} from '../../dev-tools/services/site-management.service';\nimport {MenuModule} from '../menu/menu.module';\nimport {QuickLinksModule} from '../quick-links/quick-links.module';\nimport {UtilitiesModule} from '../utilities/utilities.module';\nimport {SiteBackupComponent} from './site-backup/site-backup.component';\n\n@NgModule({\n    providers: [\n        SiteContextProviderService,\n        SiteManagementService,\n        AdminService,\n        ModalPopupService,\n    ],\n    imports: [\n        MenuModule,\n        // AccordionModule.forRoot(),\n        CommonModule,\n        ModalStaticModule,\n        QuickLinksModule,\n        SharedDataModule,\n        SharedFormattingModule,\n        SiteMetaDataModule,\n        UtilitiesModule,\n        RouterModule.forChild(ROUTES)\n    ],\n    declarations: [\n        HomeComponent,\n        SiteBackupComponent\n    ],\n    exports: [HomeComponent],\n    schemas: [CUSTOM_ELEMENTS_SCHEMA]\n})\nexport class HomeModule {\n}\n","import {Routes} from '@angular/router';\nimport {HomeComponent} from './home.component';\n\nexport const ROUTES: Routes = [\n    {\n        path: '',\n        component: HomeComponent\n    },\n];\n","import {Component, Input, OnInit, Output, EventEmitter} from '@angular/core';\nimport {SiteManagementService} from '../../../dev-tools/services/site-management.service';\nimport {Observable} from 'rxjs';\n\n@Component({\n    selector: 'app-site-backup',\n    templateUrl: './site-backup.component.html'\n})\nexport class SiteBackupComponent implements OnInit {\n\n    @Input('site')\n    site: string;\n    @Input()\n    showDeletedSpinner: boolean;\n\n    @Output()\n    deleted = new EventEmitter<void>();\n\n    public showSpinner: boolean = false;\n    public hasBackup: boolean = false;\n\n    constructor(private siteManagementService: SiteManagementService) {}\n\n    ngOnInit() {\n        this.checkBackup();\n    }\n\n    deleteSite() {\n        this.siteManagementService.deleteSiteDirectory(this.site).then(val => {\n            if (val.status = 200) {\n                this.showDeletedSpinner = true;\n                location.reload();\n            } else {\n                this.showDeletedSpinner = false;\n            }\n        });\n    }\n\n    checkBackup() {\n        this.siteManagementService.backupFilesExist()\n            .subscribe((data: string[]) => {\n                this.hasBackup = data.filter(value => {\n                        return value === this.site + '.zip';\n                    // return value === this.site.split('.').pop().replace('.zip', '');\n                    }).length > 0;\n            }, err => {\n                console.error(err);\n            });\n    }\n\n    backup(): Promise<void> {\n        this.showSpinner = true;\n        return new Promise((resolve, reject) => {\n            this.siteManagementService.backupBuildKit(this.site)\n                .then(() => {\n                    this.showSpinner = false;\n                    this.checkBackup();\n                    return resolve();\n                })\n                .catch(err => {\n                    this.showSpinner = false;\n                    // Uh-oh, something bad happened.\n                    return reject(err);\n                });\n        });\n    }\n}\n"],"names":["Component","ViewChild","SiteContextProviderService","AdminService","SiteManagementService","HomeComponent","constructor","_siteContextProviderService","_siteManagementService","_adminService","ngOnInit","onGetLocalDirectories","getAdminData","getLocalDirectories","subscribe","data","localDirectories","error","console","log","getFormData","admindata","adminData","args","static","template","NgModule","CUSTOM_ELEMENTS_SCHEMA","CommonModule","ModalStaticModule","RouterModule","SharedDataModule","ModalPopupService","SharedFormattingModule","SiteMetaDataModule","ROUTES","MenuModule","QuickLinksModule","UtilitiesModule","SiteBackupComponent","HomeModule","providers","imports","forChild","declarations","exports","schemas","path","component","Input","Output","EventEmitter","siteManagementService","checkBackup","deleteSite","deleteSiteDirectory","site","then","val","status","showDeletedSpinner","location","reload","backupFilesExist","hasBackup","filter","value","length","err","backup","showSpinner","Promise","resolve","reject","backupBuildKit","catch","selector"],"sourceRoot":"webpack:///","x_google_ignoreList":[]}